@page "/admin/utilities"
@inject DataService dataService

<PageTitle>Admin Utilities</PageTitle>

<h3>Admin Utilities</h3>

<div>
    <SfButton @onclick="RefreshCustomerLookupTable">Refresh Customer Lookup table</SfButton>
</div>

<div>
    <p>Status: @statusMessage</p>
    <p>Number of records: @recordCount</p>
</div>

@code {
    private string statusMessage = "Idle";
    private int recordCount = 0;

    private async Task RefreshCustomerLookupTable()
    {
        try
        {
            statusMessage = "Refreshing...";
            var result = await dataService.RefreshConsolidatedCustomers();
            recordCount = result; // Assuming the method returns the number of records
            statusMessage = "Refresh completed successfully.";
        }
        catch (Exception ex)
        {
            statusMessage = $"Error: {ex.Message}";
        }
    }
}